{"/Users/efosa/hackerbay-backend/src/server.js":{"path":"/Users/efosa/hackerbay-backend/src/server.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":55}},"4":{"start":{"line":12,"column":15},"end":{"line":12,"column":57}},"5":{"start":{"line":14,"column":18},"end":{"line":14,"column":64}},"6":{"start":{"line":16,"column":24},"end":{"line":16,"column":77}},"7":{"start":{"line":18,"column":15},"end":{"line":18,"column":57}},"8":{"start":{"line":20,"column":14},"end":{"line":20,"column":55}},"9":{"start":{"line":22,"column":18},"end":{"line":22,"column":64}},"10":{"start":{"line":24,"column":22},"end":{"line":24,"column":72}},"11":{"start":{"line":26,"column":14},"end":{"line":26,"column":57}},"12":{"start":{"line":28,"column":15},"end":{"line":28,"column":65}},"13":{"start":{"line":30,"column":28},"end":{"line":30,"column":61}},"14":{"start":{"line":32,"column":39},"end":{"line":32,"column":95}},"15":{"start":{"line":34,"column":54},"end":{"line":34,"column":73}},"16":{"start":{"line":34,"column":75},"end":{"line":34,"column":326}},"17":{"start":{"line":34,"column":125},"end":{"line":34,"column":161}},"18":{"start":{"line":34,"column":163},"end":{"line":34,"column":292}},"19":{"start":{"line":34,"column":183},"end":{"line":34,"column":292}},"20":{"start":{"line":34,"column":225},"end":{"line":34,"column":288}},"21":{"start":{"line":34,"column":293},"end":{"line":34,"column":324}},"22":{"start":{"line":34,"column":327},"end":{"line":34,"column":339}},"23":{"start":{"line":36,"column":33},"end":{"line":36,"column":517}},"24":{"start":{"line":36,"column":46},"end":{"line":36,"column":47}},"25":{"start":{"line":36,"column":91},"end":{"line":36,"column":131}},"26":{"start":{"line":36,"column":133},"end":{"line":36,"column":515}},"27":{"start":{"line":36,"column":146},"end":{"line":36,"column":247}},"28":{"start":{"line":36,"column":201},"end":{"line":36,"column":243}},"29":{"start":{"line":36,"column":255},"end":{"line":36,"column":515}},"30":{"start":{"line":36,"column":295},"end":{"line":36,"column":369}},"31":{"start":{"line":36,"column":379},"end":{"line":36,"column":513}},"32":{"start":{"line":36,"column":428},"end":{"line":36,"column":509}},"33":{"start":{"line":36,"column":518},"end":{"line":36,"column":532}},"34":{"start":{"line":38,"column":44},"end":{"line":38,"column":195}},"35":{"start":{"line":38,"column":62},"end":{"line":38,"column":166}},"36":{"start":{"line":38,"column":176},"end":{"line":38,"column":193}},"37":{"start":{"line":38,"column":196},"end":{"line":38,"column":207}},"38":{"start":{"line":41,"column":0},"end":{"line":41,"column":28}},"39":{"start":{"line":43,"column":0},"end":{"line":43,"column":40}},"40":{"start":{"line":45,"column":10},"end":{"line":45,"column":36}},"41":{"start":{"line":46,"column":11},"end":{"line":46,"column":15}},"42":{"start":{"line":47,"column":13},"end":{"line":53,"column":2}},"43":{"start":{"line":55,"column":13},"end":{"line":63,"column":2}},"44":{"start":{"line":65,"column":17},"end":{"line":71,"column":2}},"45":{"start":{"line":68,"column":6},"end":{"line":68,"column":58}},"46":{"start":{"line":72,"column":0},"end":{"line":72,"column":20}},"47":{"start":{"line":73,"column":0},"end":{"line":73,"column":39}},"48":{"start":{"line":74,"column":0},"end":{"line":76,"column":4}},"49":{"start":{"line":77,"column":0},"end":{"line":77,"column":29}},"50":{"start":{"line":79,"column":22},"end":{"line":81,"column":2}},"51":{"start":{"line":83,"column":0},"end":{"line":88,"column":3}},"52":{"start":{"line":84,"column":2},"end":{"line":84,"column":58}},"53":{"start":{"line":85,"column":2},"end":{"line":87,"column":5}},"54":{"start":{"line":89,"column":0},"end":{"line":89,"column":110}},"55":{"start":{"line":90,"column":0},"end":{"line":90,"column":17}},"56":{"start":{"line":91,"column":15},"end":{"line":91,"column":18}},"57":{"start":{"line":92,"column":0},"end":{"line":92,"column":30}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":31}},"loc":{"start":{"line":32,"column":37},"end":{"line":32,"column":97}},"line":32},"1":{"name":"ownKeys","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":16}},"loc":{"start":{"line":34,"column":41},"end":{"line":34,"column":341}},"line":34},"2":{"name":"(anonymous_2)","decl":{"start":{"line":34,"column":208},"end":{"line":34,"column":209}},"loc":{"start":{"line":34,"column":223},"end":{"line":34,"column":290}},"line":34},"3":{"name":"_objectSpread","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":22}},"loc":{"start":{"line":36,"column":31},"end":{"line":36,"column":534}},"line":36},"4":{"name":"(anonymous_4)","decl":{"start":{"line":36,"column":184},"end":{"line":36,"column":185}},"loc":{"start":{"line":36,"column":199},"end":{"line":36,"column":245}},"line":36},"5":{"name":"(anonymous_5)","decl":{"start":{"line":36,"column":411},"end":{"line":36,"column":412}},"loc":{"start":{"line":36,"column":426},"end":{"line":36,"column":511}},"line":36},"6":{"name":"_defineProperty","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":42},"end":{"line":38,"column":209}},"line":38},"7":{"name":"write","decl":{"start":{"line":67,"column":20},"end":{"line":67,"column":25}},"loc":{"start":{"line":67,"column":35},"end":{"line":69,"column":5}},"line":67},"8":{"name":"(anonymous_8)","decl":{"start":{"line":83,"column":13},"end":{"line":83,"column":14}},"loc":{"start":{"line":83,"column":33},"end":{"line":88,"column":1}},"line":83}},"branchMap":{"0":{"loc":{"start":{"line":32,"column":46},"end":{"line":32,"column":94}},"type":"cond-expr","locations":[{"start":{"line":32,"column":70},"end":{"line":32,"column":73}},{"start":{"line":32,"column":76},"end":{"line":32,"column":94}}],"line":32},"1":{"loc":{"start":{"line":32,"column":46},"end":{"line":32,"column":67}},"type":"binary-expr","locations":[{"start":{"line":32,"column":46},"end":{"line":32,"column":49}},{"start":{"line":32,"column":53},"end":{"line":32,"column":67}}],"line":32},"2":{"loc":{"start":{"line":34,"column":75},"end":{"line":34,"column":326}},"type":"if","locations":[{"start":{"line":34,"column":75},"end":{"line":34,"column":326}},{"start":{"line":34,"column":75},"end":{"line":34,"column":326}}],"line":34},"3":{"loc":{"start":{"line":34,"column":163},"end":{"line":34,"column":292}},"type":"if","locations":[{"start":{"line":34,"column":163},"end":{"line":34,"column":292}},{"start":{"line":34,"column":163},"end":{"line":34,"column":292}}],"line":34},"4":{"loc":{"start":{"line":36,"column":91},"end":{"line":36,"column":131}},"type":"cond-expr","locations":[{"start":{"line":36,"column":114},"end":{"line":36,"column":126}},{"start":{"line":36,"column":129},"end":{"line":36,"column":131}}],"line":36},"5":{"loc":{"start":{"line":36,"column":133},"end":{"line":36,"column":515}},"type":"if","locations":[{"start":{"line":36,"column":133},"end":{"line":36,"column":515}},{"start":{"line":36,"column":133},"end":{"line":36,"column":515}}],"line":36},"6":{"loc":{"start":{"line":36,"column":255},"end":{"line":36,"column":515}},"type":"if","locations":[{"start":{"line":36,"column":255},"end":{"line":36,"column":515}},{"start":{"line":36,"column":255},"end":{"line":36,"column":515}}],"line":36},"7":{"loc":{"start":{"line":38,"column":44},"end":{"line":38,"column":195}},"type":"if","locations":[{"start":{"line":38,"column":44},"end":{"line":38,"column":195}},{"start":{"line":38,"column":44},"end":{"line":38,"column":195}}],"line":38}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":10,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":1,"23":1,"24":1,"25":2,"26":2,"27":1,"28":10,"29":1,"30":1,"31":0,"32":0,"33":1,"34":10,"35":0,"36":10,"37":10,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":10,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":0,"53":0,"54":1,"55":1,"56":1,"57":1},"f":{"0":10,"1":1,"2":0,"3":1,"4":10,"5":0,"6":10,"7":10,"8":0},"b":{"0":[1,9],"1":[10,10],"2":[1,0],"3":[1,0],"4":[2,0],"5":[1,1],"6":[1,0],"7":[0,10]},"inputSourceMap":{"version":3,"sources":["server.js"],"names":["dotenv","config","stMonitor","start","app","PORT","format","method","url","status","contentLength","responseTime","logger","winston","createLogger","transports","Logsene","token","process","env","LOGS_TOKEN","level","type","httpLogger","stream","write","message","info","JSON","parse","use","bodyParser","json","urlencoded","extended","swaggerDocument","swaggerJSON","host","get","req","res","swaggerUi","serve","setup","listen"],"mappings":";;;;;;;AAAA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA;;;;;;;;;;AAAoD;AAEpDA,mBAAOC,MAAP;;AAEAC,gCAAUC,KAAV;;AAEA,IAAMC,GAAG,GAAG,0BAAZ;AAEA,IAAMC,IAAI,GAAG,IAAb;AAEA,IAAMC,MAAM,GAAG,4BAAK;AAClBC,EAAAA,MAAM,EAAE,SADU;AAElBC,EAAAA,GAAG,EAAE,MAFa;AAGlBC,EAAAA,MAAM,EAAE,SAHU;AAIlBC,EAAAA,aAAa,EAAE,sBAJG;AAKlBC,EAAAA,YAAY,EAAE;AALI,CAAL,CAAf;;AAQA,IAAMC,MAAM,GAAGC,oBAAQC,YAAR,CAAqB;AAClCC,EAAAA,UAAU,EAAE,CACV,IAAIC,0BAAJ,CAAY;AACVC,IAAAA,KAAK,EAAEC,OAAO,CAACC,GAAR,CAAYC,UADT;AACqB;AAC/BC,IAAAA,KAAK,EAAE,MAFG;AAGVC,IAAAA,IAAI,EAAE,UAHI;AAIVd,IAAAA,GAAG,EAAE;AAJK,GAAZ,CADU;AADsB,CAArB,CAAf;;AAWA,IAAMe,UAAU,GAAG,wBAAOjB,MAAP,EAAe;AAChCkB,EAAAA,MAAM,EAAE;AACNC,IAAAA,KAAK,EAAE,eAACC,OAAD;AAAA,aAAad,MAAM,CAACe,IAAP,CAAY,UAAZ,EAAwBC,IAAI,CAACC,KAAL,CAAWH,OAAX,CAAxB,CAAb;AAAA;AADD;AADwB,CAAf,CAAnB;AAMAtB,GAAG,CAAC0B,GAAJ,CAAQP,UAAR;AAEAnB,GAAG,CAAC0B,GAAJ,CAAQC,uBAAWC,IAAX,EAAR;AACA5B,GAAG,CAAC0B,GAAJ,CAAQC,uBAAWE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AAEA,wBAAO9B,GAAP;;AAEA,IAAM+B,eAAe,qBAChBC,mBADgB;AAEnBC,EAAAA,IAAI,sBAAehC,IAAf;AAFe,EAArB;;AAKAD,GAAG,CAACkC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzB5B,EAAAA,MAAM,CAACe,IAAP,sCAA0CtB,IAA1C;AACA,SAAOmC,GAAG,CACP/B,MADI,CACG,GADH,EAEJuB,IAFI,CAEC;AAAEN,IAAAA,OAAO,EAAE;AAAX,GAFD,CAAP;AAGD,CALD;AAMAtB,GAAG,CAAC0B,GAAJ,CAAQ,WAAR,EAAqBW,6BAAUC,KAA/B,EAAsCD,6BAAUE,KAAV,CAAgBR,eAAhB,CAAtC;AAEA/B,GAAG,CAACwC,MAAJ,CAAWvC,IAAX;eAEeD,G","sourceRoot":"/Users/efosa/hackerbay-backend/src","sourcesContent":["import '@babel/polyfill';\n\nimport dotenv from 'dotenv';\n\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport swaggerUi from 'swagger-ui-express';\nimport winston from 'winston';\nimport morgan from 'morgan';\nimport json from 'morgan-json';\nimport Logsene from 'winston-logsene';\n\nimport routes from './routes';\nimport swaggerJSON from '../swagger.json';\n\nimport { stMonitor } from 'sematext-agent-express'; // eslint-disable-line\n\ndotenv.config();\n\nstMonitor.start();\n\nconst app = express();\n\nconst PORT = 8080;\n\nconst format = json({\n  method: ':method',\n  url: ':url',\n  status: ':status',\n  contentLength: ':res[content-length]',\n  responseTime: ':response-time',\n});\n\nconst logger = winston.createLogger({\n  transports: [\n    new Logsene({\n      token: process.env.LOGS_TOKEN, // token\n      level: 'info',\n      type: 'api_logs',\n      url: 'https://logsene-receiver.sematext.com/_bulk',\n    }),\n  ],\n});\n\nconst httpLogger = morgan(format, {\n  stream: {\n    write: (message) => logger.info('HTTP LOG', JSON.parse(message)),\n  },\n});\n\napp.use(httpLogger);\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\n\nroutes(app);\n\nconst swaggerDocument = {\n  ...swaggerJSON,\n  host: `localhost:${PORT}`,\n};\n\napp.get('/', (req, res) => {\n  logger.info(`API UP AND RUNNING ON PORT ${PORT}`);\n  return res\n    .status(200)\n    .json({ message: 'Welcome to efosa hackerbay microservice' });\n});\napp.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerDocument));\n\napp.listen(PORT);\n\nexport default app;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"41bab07df44168dc81ee86ff35c62c80d0bf1693","contentHash":"9a239804fc04c4a69f7d37b6ee573bc09e529e35c42ef0c9f51050f17d53d3cb"},"/Users/efosa/hackerbay-backend/src/routes/index.js":{"path":"/Users/efosa/hackerbay-backend/src/routes/index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":18},"end":{"line":8,"column":54}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":44}},"4":{"start":{"line":12,"column":32},"end":{"line":12,"column":106}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":15},"end":{"line":20,"column":1}},"7":{"start":{"line":17,"column":2},"end":{"line":17,"column":98}},"8":{"start":{"line":18,"column":2},"end":{"line":18,"column":135}},"9":{"start":{"line":19,"column":2},"end":{"line":19,"column":137}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":30}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":97}},"line":14},"1":{"name":"_default","decl":{"start":{"line":16,"column":24},"end":{"line":16,"column":32}},"loc":{"start":{"line":16,"column":41},"end":{"line":20,"column":1}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":94}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":94}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":1,"1":1},"b":{"0":[1,0],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["router","post","validateUsernameAndPassword","authenticate","checkUserIsAuthenticated","validateImageurl","generateThumbnail","patch","validatePatchAndDocument","applyJsonPatch"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;eAEe,kBAACA,MAAD,EAAY;AACzBA,EAAAA,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA4BC,uCAA5B,EAAyDC,yBAAzD;AACAH,EAAAA,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAiCG,oCAAjC,EAA2DC,4BAA3D,EAA6EC,8BAA7E;AACAN,EAAAA,MAAM,CAACO,KAAP,CAAa,eAAb,EAA8BH,oCAA9B,EAAwDI,oCAAxD,EAAkFC,2BAAlF;AACD,C","sourceRoot":"/Users/efosa/hackerbay-backend/src/routes","sourcesContent":["import { validateUsernameAndPassword, validateImageurl, validatePatchAndDocument } from '../middlewares/validators';\nimport { authenticate, generateThumbnail, applyJsonPatch } from '../controllers';\nimport checkUserIsAuthenticated from '../middlewares/checkUserIsAuthenticated';\n\nexport default (router) => {\n  router.post('/api/v1/auth', validateUsernameAndPassword, authenticate);\n  router.post('/api/v1/thumbnail', checkUserIsAuthenticated, validateImageurl, generateThumbnail);\n  router.patch('/api/v1/patch', checkUserIsAuthenticated, validatePatchAndDocument, applyJsonPatch);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"37204cda80168c333b3b69d8759f706f62211581","contentHash":"cafa3dd312336411eb2c9ff3b47e974d260377b0882e8d3eb2c6ee971ed73ca6"},"/Users/efosa/hackerbay-backend/src/middlewares/validators.js":{"path":"/Users/efosa/hackerbay-backend/src/middlewares/validators.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":107}},"2":{"start":{"line":8,"column":19},"end":{"line":8,"column":65}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":20},"end":{"line":15,"column":1}},"5":{"start":{"line":17,"column":15},"end":{"line":29,"column":1}},"6":{"start":{"line":18,"column":19},"end":{"line":18,"column":75}},"7":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"8":{"start":{"line":21,"column":4},"end":{"line":21,"column":18}},"9":{"start":{"line":24,"column":15},"end":{"line":24,"column":38}},"10":{"start":{"line":25,"column":2},"end":{"line":28,"column":5}},"11":{"start":{"line":31,"column":34},"end":{"line":38,"column":1}},"12":{"start":{"line":32,"column":13},"end":{"line":32,"column":22}},"13":{"start":{"line":33,"column":13},"end":{"line":36,"column":3}},"14":{"start":{"line":37,"column":2},"end":{"line":37,"column":41}},"15":{"start":{"line":40,"column":0},"end":{"line":40,"column":66}},"16":{"start":{"line":42,"column":23},"end":{"line":48,"column":1}},"17":{"start":{"line":43,"column":13},"end":{"line":43,"column":23}},"18":{"start":{"line":44,"column":13},"end":{"line":46,"column":3}},"19":{"start":{"line":47,"column":2},"end":{"line":47,"column":41}},"20":{"start":{"line":50,"column":0},"end":{"line":50,"column":44}},"21":{"start":{"line":52,"column":31},"end":{"line":59,"column":1}},"22":{"start":{"line":53,"column":13},"end":{"line":53,"column":23}},"23":{"start":{"line":54,"column":13},"end":{"line":57,"column":3}},"24":{"start":{"line":58,"column":2},"end":{"line":58,"column":41}},"25":{"start":{"line":61,"column":0},"end":{"line":61,"column":60}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":97}},"line":10},"1":{"name":"validate","decl":{"start":{"line":17,"column":24},"end":{"line":17,"column":32}},"loc":{"start":{"line":17,"column":58},"end":{"line":29,"column":1}},"line":17},"2":{"name":"validateUsernameAndPassword","decl":{"start":{"line":31,"column":43},"end":{"line":31,"column":70}},"loc":{"start":{"line":31,"column":88},"end":{"line":38,"column":1}},"line":31},"3":{"name":"validateImageurl","decl":{"start":{"line":42,"column":32},"end":{"line":42,"column":48}},"loc":{"start":{"line":42,"column":67},"end":{"line":48,"column":1}},"line":42},"4":{"name":"validatePatchAndDocument","decl":{"start":{"line":52,"column":40},"end":{"line":52,"column":64}},"loc":{"start":{"line":52,"column":83},"end":{"line":59,"column":1}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":94}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":94}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},{"start":{"line":20,"column":2},"end":{"line":22,"column":3}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":8,"7":8,"8":5,"9":3,"10":3,"11":1,"12":2,"13":2,"14":2,"15":1,"16":1,"17":3,"18":3,"19":3,"20":1,"21":1,"22":3,"23":3,"24":3,"25":1},"f":{"0":1,"1":8,"2":2,"3":3,"4":3},"b":{"0":[0,1],"1":[1,1],"2":[5,3]},"inputSourceMap":{"version":3,"sources":["validators.js"],"names":["errorMessages","required","url","validate","fields","rule","res","next","validation","Validator","passes","errors","all","status","json","message","validateUsernameAndPassword","body","username","password","validateImageurl","imageUrl","validatePatchAndDocument","document","operations"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAMA,aAAa,GAAG;AACpBC,EAAAA,QAAQ,EAAE,wBADU;AAEpBC,EAAAA,GAAG,EAAE;AAFe,CAAtB;;AAKA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,MAAD,EAASC,IAAT,EAAeC,GAAf,EAAoBC,IAApB,EAA6B;AAC5C,MAAMC,UAAU,GAAG,IAAIC,uBAAJ,CAAcL,MAAd,EAAsBC,IAAtB,EAA4BL,aAA5B,CAAnB;;AACA,MAAIQ,UAAU,CAACE,MAAX,EAAJ,EAAyB;AACvB,WAAOH,IAAI,EAAX;AACD;;AAED,MAAMI,MAAM,GAAGH,UAAU,CAACG,MAAX,CAAkBC,GAAlB,EAAf;AACA,SAAON,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,IAAAA,OAAO,EAAE,qBADiB;AAE1BJ,IAAAA,MAAM,EAANA;AAF0B,GAArB,CAAP;AAID,CAXD;;AAaO,IAAMK,2BAA2B,GAAG,SAA9BA,2BAA8B,OAAWV,GAAX,EAAgBC,IAAhB,EAAyB;AAAA,MAAtBU,IAAsB,QAAtBA,IAAsB;AAClE,MAAMZ,IAAI,GAAG;AACXa,IAAAA,QAAQ,EAAE,UADC;AAEXC,IAAAA,QAAQ,EAAE;AAFC,GAAb;AAKA,SAAOhB,QAAQ,CAACc,IAAD,EAAOZ,IAAP,EAAaC,GAAb,EAAkBC,IAAlB,CAAf;AACD,CAPM;;;;AASA,IAAMa,gBAAgB,GAAG,SAAnBA,gBAAmB,QAAWd,GAAX,EAAgBC,IAAhB,EAAyB;AAAA,MAAtBU,IAAsB,SAAtBA,IAAsB;AACvD,MAAMZ,IAAI,GAAG;AACXgB,IAAAA,QAAQ,EAAE;AADC,GAAb;AAIA,SAAOlB,QAAQ,CAACc,IAAD,EAAOZ,IAAP,EAAaC,GAAb,EAAkBC,IAAlB,CAAf;AACD,CANM;;;;AAQA,IAAMe,wBAAwB,GAAG,SAA3BA,wBAA2B,QAAWhB,GAAX,EAAgBC,IAAhB,EAAyB;AAAA,MAAtBU,IAAsB,SAAtBA,IAAsB;AAC/D,MAAMZ,IAAI,GAAG;AACXkB,IAAAA,QAAQ,EAAE,UADC;AAEXC,IAAAA,UAAU,EAAE;AAFD,GAAb;AAKA,SAAOrB,QAAQ,CAACc,IAAD,EAAOZ,IAAP,EAAaC,GAAb,EAAkBC,IAAlB,CAAf;AACD,CAPM","sourceRoot":"/Users/efosa/hackerbay-backend/src/middlewares","sourcesContent":["import Validator from 'validatorjs';\n\nconst errorMessages = {\n  required: 'this field is required',\n  url: 'this field should be a valid url',\n};\n\nconst validate = (fields, rule, res, next) => {\n  const validation = new Validator(fields, rule, errorMessages);\n  if (validation.passes()) {\n    return next();\n  }\n\n  const errors = validation.errors.all();\n  return res.status(400).json({\n    message: 'Invalid Credentials',\n    errors,\n  });\n};\n\nexport const validateUsernameAndPassword = ({ body }, res, next) => {\n  const rule = {\n    username: 'required',\n    password: 'required',\n  };\n\n  return validate(body, rule, res, next);\n};\n\nexport const validateImageurl = ({ body }, res, next) => {\n  const rule = {\n    imageUrl: 'required|url',\n  };\n\n  return validate(body, rule, res, next);\n};\n\nexport const validatePatchAndDocument = ({ body }, res, next) => {\n  const rule = {\n    document: 'required',\n    operations: 'required',\n  };\n\n  return validate(body, rule, res, next);\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3c5b576cb77dda80f4b72ec7b0d7f17ad743ec4d","contentHash":"fe2dea3efa891c4a6227907d4bdcafb0a56c71a062871fe7d1360ee2be0775e1"},"/Users/efosa/hackerbay-backend/src/controllers/index.js":{"path":"/Users/efosa/hackerbay-backend/src/controllers/index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":83}},"2":{"start":{"line":8,"column":18},"end":{"line":8,"column":39}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":33}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":55}},"5":{"start":{"line":14,"column":17},"end":{"line":14,"column":61}},"6":{"start":{"line":16,"column":19},"end":{"line":16,"column":78}},"7":{"start":{"line":18,"column":39},"end":{"line":18,"column":95}},"8":{"start":{"line":20,"column":77},"end":{"line":20,"column":175}},"9":{"start":{"line":20,"column":94},"end":{"line":20,"column":107}},"10":{"start":{"line":20,"column":121},"end":{"line":20,"column":131}},"11":{"start":{"line":20,"column":151},"end":{"line":20,"column":165}},"12":{"start":{"line":20,"column":166},"end":{"line":20,"column":173}},"13":{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},"14":{"start":{"line":20,"column":193},"end":{"line":20,"column":208}},"15":{"start":{"line":20,"column":218},"end":{"line":20,"column":261}},"16":{"start":{"line":22,"column":33},"end":{"line":22,"column":387}},"17":{"start":{"line":22,"column":65},"end":{"line":22,"column":69}},"18":{"start":{"line":22,"column":78},"end":{"line":22,"column":87}},"19":{"start":{"line":22,"column":89},"end":{"line":22,"column":384}},"20":{"start":{"line":22,"column":147},"end":{"line":22,"column":167}},"21":{"start":{"line":22,"column":193},"end":{"line":22,"column":264}},"22":{"start":{"line":22,"column":290},"end":{"line":22,"column":360}},"23":{"start":{"line":22,"column":363},"end":{"line":22,"column":380}},"24":{"start":{"line":24,"column":0},"end":{"line":24,"column":28}},"25":{"start":{"line":26,"column":17},"end":{"line":26,"column":31}},"26":{"start":{"line":27,"column":19},"end":{"line":27,"column":30}},"27":{"start":{"line":28,"column":25},"end":{"line":28,"column":56}},"28":{"start":{"line":29,"column":28},"end":{"line":29,"column":62}},"29":{"start":{"line":30,"column":28},"end":{"line":30,"column":62}},"30":{"start":{"line":31,"column":0},"end":{"line":35,"column":3}},"31":{"start":{"line":37,"column":19},"end":{"line":46,"column":1}},"32":{"start":{"line":38,"column":17},"end":{"line":38,"column":35}},"33":{"start":{"line":39,"column":14},"end":{"line":41,"column":4}},"34":{"start":{"line":42,"column":2},"end":{"line":45,"column":5}},"35":{"start":{"line":48,"column":0},"end":{"line":48,"column":36}},"36":{"start":{"line":52,"column":0},"end":{"line":105,"column":3}},"37":{"start":{"line":53,"column":14},"end":{"line":100,"column":5}},"38":{"start":{"line":57,"column":4},"end":{"line":99,"column":32}},"39":{"start":{"line":58,"column":6},"end":{"line":98,"column":7}},"40":{"start":{"line":59,"column":8},"end":{"line":97,"column":9}},"41":{"start":{"line":61,"column":12},"end":{"line":61,"column":30}},"42":{"start":{"line":62,"column":12},"end":{"line":62,"column":47}},"43":{"start":{"line":63,"column":12},"end":{"line":85,"column":16}},"44":{"start":{"line":66,"column":14},"end":{"line":71,"column":15}},"45":{"start":{"line":67,"column":30},"end":{"line":67,"column":43}},"46":{"start":{"line":68,"column":16},"end":{"line":70,"column":19}},"47":{"start":{"line":73,"column":30},"end":{"line":80,"column":16}},"48":{"start":{"line":81,"column":14},"end":{"line":84,"column":17}},"49":{"start":{"line":88,"column":12},"end":{"line":88,"column":30}},"50":{"start":{"line":89,"column":12},"end":{"line":89,"column":47}},"51":{"start":{"line":90,"column":12},"end":{"line":92,"column":16}},"52":{"start":{"line":96,"column":12},"end":{"line":96,"column":35}},"53":{"start":{"line":102,"column":2},"end":{"line":104,"column":4}},"54":{"start":{"line":103,"column":4},"end":{"line":103,"column":40}},"55":{"start":{"line":107,"column":0},"end":{"line":107,"column":46}},"56":{"start":{"line":111,"column":0},"end":{"line":147,"column":3}},"57":{"start":{"line":112,"column":14},"end":{"line":142,"column":5}},"58":{"start":{"line":117,"column":4},"end":{"line":141,"column":33}},"59":{"start":{"line":118,"column":6},"end":{"line":140,"column":7}},"60":{"start":{"line":119,"column":8},"end":{"line":139,"column":9}},"61":{"start":{"line":121,"column":12},"end":{"line":121,"column":31}},"62":{"start":{"line":122,"column":12},"end":{"line":122,"column":99}},"63":{"start":{"line":123,"column":12},"end":{"line":123,"column":86}},"64":{"start":{"line":124,"column":12},"end":{"line":127,"column":16}},"65":{"start":{"line":130,"column":12},"end":{"line":130,"column":31}},"66":{"start":{"line":131,"column":12},"end":{"line":131,"column":49}},"67":{"start":{"line":132,"column":12},"end":{"line":134,"column":16}},"68":{"start":{"line":138,"column":12},"end":{"line":138,"column":36}},"69":{"start":{"line":144,"column":2},"end":{"line":146,"column":4}},"70":{"start":{"line":145,"column":4},"end":{"line":145,"column":40}},"71":{"start":{"line":149,"column":0},"end":{"line":149,"column":40}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":31}},"loc":{"start":{"line":18,"column":37},"end":{"line":18,"column":97}},"line":18},"1":{"name":"asyncGeneratorStep","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":75},"end":{"line":20,"column":265}},"line":20},"2":{"name":"_asyncToGenerator","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":26}},"loc":{"start":{"line":22,"column":31},"end":{"line":22,"column":389}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":40},"end":{"line":22,"column":41}},"loc":{"start":{"line":22,"column":52},"end":{"line":22,"column":386}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":108},"end":{"line":22,"column":109}},"loc":{"start":{"line":22,"column":135},"end":{"line":22,"column":382}},"line":22},"5":{"name":"_next","decl":{"start":{"line":22,"column":178},"end":{"line":22,"column":183}},"loc":{"start":{"line":22,"column":191},"end":{"line":22,"column":266}},"line":22},"6":{"name":"_throw","decl":{"start":{"line":22,"column":276},"end":{"line":22,"column":282}},"loc":{"start":{"line":22,"column":288},"end":{"line":22,"column":362}},"line":22},"7":{"name":"authenticate","decl":{"start":{"line":37,"column":28},"end":{"line":37,"column":40}},"loc":{"start":{"line":37,"column":52},"end":{"line":46,"column":1}},"line":37},"8":{"name":"(anonymous_8)","decl":{"start":{"line":52,"column":0},"end":{"line":52,"column":1}},"loc":{"start":{"line":52,"column":12},"end":{"line":105,"column":1}},"line":52},"9":{"name":"_callee","decl":{"start":{"line":55,"column":35},"end":{"line":55,"column":42}},"loc":{"start":{"line":55,"column":53},"end":{"line":100,"column":3}},"line":55},"10":{"name":"_callee$","decl":{"start":{"line":57,"column":44},"end":{"line":57,"column":52}},"loc":{"start":{"line":57,"column":63},"end":{"line":99,"column":5}},"line":57},"11":{"name":"(anonymous_11)","decl":{"start":{"line":65,"column":15},"end":{"line":65,"column":16}},"loc":{"start":{"line":65,"column":32},"end":{"line":85,"column":13}},"line":65},"12":{"name":"generateThumbnail","decl":{"start":{"line":102,"column":18},"end":{"line":102,"column":35}},"loc":{"start":{"line":102,"column":45},"end":{"line":104,"column":3}},"line":102},"13":{"name":"(anonymous_13)","decl":{"start":{"line":111,"column":0},"end":{"line":111,"column":1}},"loc":{"start":{"line":111,"column":12},"end":{"line":147,"column":1}},"line":111},"14":{"name":"_callee2","decl":{"start":{"line":114,"column":35},"end":{"line":114,"column":43}},"loc":{"start":{"line":114,"column":54},"end":{"line":142,"column":3}},"line":114},"15":{"name":"_callee2$","decl":{"start":{"line":117,"column":44},"end":{"line":117,"column":53}},"loc":{"start":{"line":117,"column":65},"end":{"line":141,"column":5}},"line":117},"16":{"name":"applyJsonPatch","decl":{"start":{"line":144,"column":18},"end":{"line":144,"column":32}},"loc":{"start":{"line":144,"column":43},"end":{"line":146,"column":3}},"line":144}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":46},"end":{"line":18,"column":94}},"type":"cond-expr","locations":[{"start":{"line":18,"column":70},"end":{"line":18,"column":73}},{"start":{"line":18,"column":76},"end":{"line":18,"column":94}}],"line":18},"1":{"loc":{"start":{"line":18,"column":46},"end":{"line":18,"column":67}},"type":"binary-expr","locations":[{"start":{"line":18,"column":46},"end":{"line":18,"column":49}},{"start":{"line":18,"column":53},"end":{"line":18,"column":67}}],"line":18},"2":{"loc":{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},"type":"if","locations":[{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},{"start":{"line":20,"column":176},"end":{"line":20,"column":263}}],"line":20},"3":{"loc":{"start":{"line":59,"column":8},"end":{"line":97,"column":9}},"type":"switch","locations":[{"start":{"line":60,"column":10},"end":{"line":85,"column":16}},{"start":{"line":87,"column":10},"end":{"line":92,"column":16}},{"start":{"line":94,"column":10},"end":{"line":94,"column":17}},{"start":{"line":95,"column":10},"end":{"line":96,"column":35}}],"line":59},"4":{"loc":{"start":{"line":66,"column":14},"end":{"line":71,"column":15}},"type":"if","locations":[{"start":{"line":66,"column":14},"end":{"line":71,"column":15}},{"start":{"line":66,"column":14},"end":{"line":71,"column":15}}],"line":66},"5":{"loc":{"start":{"line":119,"column":8},"end":{"line":139,"column":9}},"type":"switch","locations":[{"start":{"line":120,"column":10},"end":{"line":127,"column":16}},{"start":{"line":129,"column":10},"end":{"line":134,"column":16}},{"start":{"line":136,"column":10},"end":{"line":136,"column":17}},{"start":{"line":137,"column":10},"end":{"line":138,"column":36}}],"line":119}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":3,"8":4,"9":4,"10":4,"11":0,"12":0,"13":4,"14":4,"15":0,"16":2,"17":4,"18":4,"19":4,"20":4,"21":4,"22":0,"23":4,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":2,"39":4,"40":4,"41":2,"42":2,"43":2,"44":2,"45":1,"46":1,"47":1,"48":1,"49":0,"50":0,"51":0,"52":2,"53":1,"54":2,"55":1,"56":1,"57":1,"58":2,"59":5,"60":5,"61":2,"62":2,"63":2,"64":1,"65":1,"66":1,"67":1,"68":2,"69":1,"70":2,"71":1},"f":{"0":3,"1":4,"2":2,"3":4,"4":4,"5":4,"6":0,"7":1,"8":1,"9":2,"10":4,"11":2,"12":2,"13":1,"14":2,"15":5,"16":2},"b":{"0":[1,2],"1":[3,3],"2":[4,0],"3":[2,0,0,2],"4":[1,1],"5":[2,1,0,2]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["dotenv","config","cloudinary","v2","process","env","CLOUDINARY_API_KEY","CLOUDINARY_API_SECRET","CLOUDINARY_CLOUD_NAME","cloud_name","api_key","api_secret","authenticate","res","username","body","token","status","json","message","generateThumbnail","req","imageId","uploader","upload","imageUrl","public_id","error","http_code","thumbnail","url","secure","transformation","width","height","crop","applyJsonPatch","document","operations","patchedDocument","jsonPatch","apply_patch"],"mappings":"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","sourceRoot":"/Users/efosa/hackerbay-backend/src/controllers","sourcesContent":["import { v2 } from 'cloudinary';\nimport { generate } from 'shortid';\nimport dotenv from 'dotenv';\nimport jsonPatch from 'jsonpatch';\n\nimport createToken from '../utilities/createToken';\n\ndotenv.config();\n\nconst cloudinary = v2;\n\nconst {\n  CLOUDINARY_API_KEY,\n  CLOUDINARY_API_SECRET,\n  CLOUDINARY_CLOUD_NAME,\n} = process.env;\n\ncloudinary.config({\n  cloud_name: CLOUDINARY_CLOUD_NAME,\n  api_key: CLOUDINARY_API_KEY,\n  api_secret: CLOUDINARY_API_SECRET,\n});\n\nexport const authenticate = ({ body: { username } }, res) => {\n  const token = createToken({ username });\n\n  return res.status(200).json({\n    message: 'Authentication successfull',\n    token,\n  });\n};\n\nexport const generateThumbnail = async (req, res) => {\n  try {\n    const imageId = generate();\n    return cloudinary.uploader.upload(\n      req.body.imageUrl,\n      { public_id: imageId },\n      (error) => {\n        if (error) {\n          const { message } = error;\n          return res.status(error.http_code).json({ message });\n        }\n        const thumbnail = cloudinary.url(imageId, {\n          secure: true,\n          transformation: [{ width: 50, height: 50, crop: 'thumb' }],\n        });\n        return res.status(200).json({\n          message: 'thumbnail generated',\n          thumbnail,\n        });\n      },\n    );\n  } catch (error) {\n    return res.status(500).json({ error });\n  }\n};\n\nexport const applyJsonPatch = async (req, res) => {\n  try {\n    const { document, operations } = req.body;\n    const patchedDocument = jsonPatch.apply_patch(document, operations);\n    return res.status(200).json({\n      message: 'Patch applied',\n      patchedDocument,\n    });\n  } catch (error) {\n    return res.status(500).json({ error });\n  }\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"86c42684e8611ecf9421a23a783bfb326cbc2761","contentHash":"0b2d622686672bb528da70e35712d8e471cdd45a367e11993c2ca17370c79450"},"/Users/efosa/hackerbay-backend/src/utilities/createToken.js":{"path":"/Users/efosa/hackerbay-backend/src/utilities/createToken.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":20},"end":{"line":8,"column":67}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":18},"end":{"line":17,"column":1}},"5":{"start":{"line":13,"column":2},"end":{"line":16,"column":25}},"6":{"start":{"line":19,"column":15},"end":{"line":19,"column":26}},"7":{"start":{"line":20,"column":0},"end":{"line":20,"column":30}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":97}},"line":10},"1":{"name":"createToken","decl":{"start":{"line":12,"column":27},"end":{"line":12,"column":38}},"loc":{"start":{"line":12,"column":45},"end":{"line":17,"column":1}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":94}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":94}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":7,"6":1,"7":1},"f":{"0":1,"1":7},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["createToken.js"],"names":["createToken","data","jwt","sign","exp","Math","floor","Date","now","process","env","SECRET"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAACC,IAAD;AAAA,SAAUC,yBAAIC,IAAJ,CAAS;AACrCC,IAAAA,GAAG,EAAEC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACC,GAAL,KAAa,IAAxB,IAAiC,KAAK,EADN;AAErCP,IAAAA,IAAI,EAAJA;AAFqC,GAAT,EAG3BQ,OAAO,CAACC,GAAR,CAAYC,MAHe,CAAV;AAAA,CAApB;;eAKeX,W","sourceRoot":"/Users/efosa/hackerbay-backend/src/utilities","sourcesContent":["import jwt from 'jsonwebtoken';\n\nconst createToken = (data) => jwt.sign({\n  exp: Math.floor(Date.now() / 1000) + (60 * 60),\n  data,\n}, process.env.SECRET);\n\nexport default createToken;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"950c7eb063a3aebc065da59888ff2c1ec0436c26","contentHash":"e502ceb655e6edbaa369855497d9521f788b9be929b5852b37930faf9e3cd8bb"},"/Users/efosa/hackerbay-backend/src/middlewares/checkUserIsAuthenticated.js":{"path":"/Users/efosa/hackerbay-backend/src/middlewares/checkUserIsAuthenticated.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":20},"end":{"line":8,"column":67}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":95}},"4":{"start":{"line":12,"column":31},"end":{"line":33,"column":1}},"5":{"start":{"line":13,"column":2},"end":{"line":32,"column":3}},"6":{"start":{"line":14,"column":16},"end":{"line":14,"column":68}},"7":{"start":{"line":16,"column":4},"end":{"line":20,"column":5}},"8":{"start":{"line":17,"column":6},"end":{"line":19,"column":9}},"9":{"start":{"line":22,"column":17},"end":{"line":22,"column":35}},"10":{"start":{"line":24,"column":18},"end":{"line":24,"column":69}},"11":{"start":{"line":26,"column":4},"end":{"line":26,"column":26}},"12":{"start":{"line":27,"column":4},"end":{"line":27,"column":18}},"13":{"start":{"line":29,"column":4},"end":{"line":31,"column":7}},"14":{"start":{"line":35,"column":15},"end":{"line":35,"column":39}},"15":{"start":{"line":36,"column":0},"end":{"line":36,"column":30}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":97}},"line":10},"1":{"name":"checkUserIsAuthenticated","decl":{"start":{"line":12,"column":40},"end":{"line":12,"column":64}},"loc":{"start":{"line":12,"column":81},"end":{"line":33,"column":1}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":94}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":94}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":68}},"type":"binary-expr","locations":[{"start":{"line":14,"column":16},"end":{"line":14,"column":41}},{"start":{"line":14,"column":45},"end":{"line":14,"column":68}}],"line":14},"3":{"loc":{"start":{"line":16,"column":4},"end":{"line":20,"column":5}},"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":20,"column":5}},{"start":{"line":16,"column":4},"end":{"line":20,"column":5}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":8,"6":8,"7":8,"8":1,"9":7,"10":7,"11":6,"12":6,"13":1,"14":1,"15":1},"f":{"0":1,"1":8},"b":{"0":[0,1],"1":[1,1],"2":[8,1],"3":[1,7]},"inputSourceMap":{"version":3,"sources":["checkUserIsAuthenticated.js"],"names":["checkUserIsAuthenticated","req","res","next","token","headers","authorization","query","status","json","message","SECRET","process","env","decoded","jwt","verify","data","error"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAMA,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACnD,MAAI;AACF,QAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAZ,IAA6BL,GAAG,CAACM,KAAJ,CAAUD,aAArD;;AACA,QAAI,CAACF,KAAL,EAAY;AACV,aAAOF,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,QAAAA,OAAO,EAAE;AADiB,OAArB,CAAP;AAGD;;AANC,QAOMC,MAPN,GAOiBC,OAAO,CAACC,GAPzB,CAOMF,MAPN;;AAQF,QAAMG,OAAO,GAAGC,yBAAIC,MAAJ,CAAWZ,KAAX,EAAkBO,MAAlB,EAA0BM,IAA1C;;AACAhB,IAAAA,GAAG,CAACa,OAAJ,GAAcA,OAAd;AACA,WAAOX,IAAI,EAAX;AACD,GAXD,CAWE,OAAOe,KAAP,EAAc;AACd,WAAOhB,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,MAAAA,OAAO,EAAE;AADiB,KAArB,CAAP;AAGD;AACF,CAjBD;;eAmBeV,wB","sourceRoot":"/Users/efosa/hackerbay-backend/src/middlewares","sourcesContent":["import jwt from 'jsonwebtoken';\n\nconst checkUserIsAuthenticated = (req, res, next) => {\n  try {\n    const token = req.headers.authorization || req.query.authorization;\n    if (!token) {\n      return res.status(401).json({\n        message: 'no token found',\n      });\n    }\n    const { SECRET } = process.env;\n    const decoded = jwt.verify(token, SECRET).data;\n    req.decoded = decoded;\n    return next();\n  } catch (error) {\n    return res.status(401).json({\n      message: 'invalid token',\n    });\n  }\n};\n\nexport default checkUserIsAuthenticated;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"559134e4c62b4246a81f6b29a9bb1f2f960837df","contentHash":"48afa004d32a5148e93e9bbc5b2a006ae1d48ce54c9507a9e2c9dc94b2f9a783"}}